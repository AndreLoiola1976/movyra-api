# Application
quarkus.application.name=movyra-api
quarkus.http.host=0.0.0.0
quarkus.http.port=8080

# Database (env-first; works in Docker and locally)
quarkus.datasource.db-kind=postgresql
quarkus.datasource.jdbc.url=${QUARKUS_DATASOURCE_JDBC_URL:jdbc:postgresql://localhost:5432/movyra}
quarkus.datasource.username=${QUARKUS_DATASOURCE_USERNAME:movyra_app}
quarkus.datasource.password=${QUARKUS_DATASOURCE_PASSWORD:movyra_dev_pwd}

# Hibernate
quarkus.hibernate-orm.database.default-schema=app
quarkus.hibernate-orm.database.generation=none
quarkus.hibernate-orm.log.sql=false

# Flyway
quarkus.flyway.migrate-at-start=${QUARKUS_FLYWAY_MIGRATE_AT_START:true}
quarkus.flyway.schemas=${QUARKUS_FLYWAY_SCHEMAS:app}
quarkus.flyway.default-schema=${QUARKUS_FLYWAY_DEFAULT_SCHEMA:app}
quarkus.flyway.locations=classpath:db/migration
quarkus.flyway.clean-at-start=false

# Logging
quarkus.log.level=INFO
quarkus.log.console.format=%d{yyyy-MM-dd HH:mm:ss,SSS} %-5p [%c{3.}] (%t) %s%e%n
quarkus.log.category."org.flywaydb".level=INFO

# Health
quarkus.smallrye-health.root-path=/q/health

# Dev Profile (keep local defaults; still env-overridable)
%dev.quarkus.log.level=DEBUG
%dev.quarkus.hibernate-orm.log.sql=true
%dev.quarkus.datasource.jdbc.url=${DB_JDBC_URL:jdbc:postgresql://localhost:5432/movyra}
%dev.quarkus.datasource.username=${DB_USER:movyra}
%dev.quarkus.datasource.password=${DB_PASSWORD:movyra123}

# Test Profile (use a different DB name by default; also env-overridable)
%test.quarkus.datasource.jdbc.url=${DB_JDBC_URL:jdbc:postgresql://localhost:5432/movyra_test}
%test.quarkus.datasource.username=${DB_USER:movyra}
%test.quarkus.datasource.password=${DB_PASSWORD:movyra123}
%test.quarkus.hibernate-orm.database.generation=drop-and-create
%test.quarkus.flyway.migrate-at-start=true
%test.quarkus.flyway.clean-at-start=true